(function(){"use strict";var t={9028:function(t,e,r){r(6992),r(8674),r(9601),r(7727);var o=r(144),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",["welcome"==t.gameState?r("WelcomeScreen"):t._e(),"welcome"!=t.gameState?r("Game",{style:{opacity:t.activeGameState()}}):t._e(),"game_over"==t.gameState?r("GameOver"):t._e()],1)},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"game"},[r("div",{staticClass:"glass"},t._l(t.glass,(function(e){return r("div",{staticClass:"line"},t._l(e,(function(e){return r("span",{staticClass:"block",style:{"background-color":t.activeColor(e)}})})),0)})),0),r("div",{staticClass:"widget"},[r("b",[t._v("NEXT FIGURE")]),t._l(t.widgetMatrix,(function(e){return r("div",{staticClass:"w-line"},t._l(e,(function(e){return r("span",{staticClass:"w-block",style:{"background-color":t.activeColor(e)}})})),0)})),r("b",[t._v("Your Score: "+t._s(100*t.score))]),t._v(" "),r("br"),r("b",[t._v("speed: "+t._s(1+Math.floor(t.score/10)))]),r("br"),r("br"),r("br"),r("b",[t._v("Controls: arrows")]),r("b")],2)])},a=[],u=r(9726),c=r(8932),g=r(5200),l=(r(8862),r(7327),r(1539),r(1738)),f=r.p+"media/sounds.15aae32a.mp3",d=9,h=0,v=20,m=!0,p={data:function(){return{vlm:.3}},computed:{gameState:function(){return this.$store.getters.getStateOfGame},gravitySpeed:function(){return this.$store.getters.getGravitySpeed},glass:function(){return this.$store.getters.getGlass},figuresNames:function(){return this.$store.getters.getFiguresNames},nextFigureCoords:function(){return this.$store.getters.getNextFigureCoords},currentFigureCoords:function(){return this.$store.getters.getCurrentFigureCoords},nextFigureColor:function(){return this.$store.getters.getNextFigureColor},currentFigureColor:function(){return this.$store.getters.getCurrentFigureColor},isGameOver:function(){return this.$store.getters.getGOstatus},widgetMatrix:function(){return this.$store.getters.getWidgetMatrix},score:function(){return this.$store.getters.getScoreCounter},colorSheme:function(){return this.$store.getters.getColorScheme}},setup:function(){var t=(0,l.Z)(f,{sprite:{move:[2220,500],rotate:[2890,150],drop:[1290,250],destroy:[0,700],gameover:[8100,1100]},volume:.3}),e=(0,g.Z)(t,1),r=e[0];return{play:r}},watch:{score:function(){this.play({id:"destroy"})}},created:function(){this.init()},mounted:function(){var t=this;document.addEventListener("keydown",(function(e){return t.keyboardDown(e)})),document.addEventListener("keyup",(function(e){return t.keyboardUp(e)}))},methods:{init:function(){var t=this;this.$store.dispatch("cleanGlass"),this.prepareNextFigure(),this.putNextFigureInTheGlass(),window.setTimeout((function(){t.loop()}),this.gravitySpeed)},loop:function(){var t=this;if(1===this.isGameOver)return this.$store.dispatch("toggleGameState","game_over"),void this.play({id:"gameover"});!0===this.canCurrentFigureMoveDown()?this.moveFigureDown():(this.$store.dispatch("seekAndDestroyFullLine"),this.$store.dispatch("difficultyChanger"),this.putNextFigureInTheGlass()),window.setTimeout((function(){t.loop()}),this.gravitySpeed)},keyboardDown:function(t){1!=this.isGameOver&&("ArrowLeft"===t.key&&this.moveFigureLeft(),"ArrowRight"===t.key&&this.moveFigureRight(),"ArrowDown"===t.key&&!0===m&&(this.softDrop("drop"),this.play({id:"move"}),m=!1),"ArrowUp"===t.key&&!0===m&&(this.figureRoration(),this.play({id:"rotate"}),m=!1),"Escape"===t.key&&window.location.reload())},keyboardUp:function(t){1!=this.isGameOver&&("ArrowUp"===t.key&&(m=!0),"ArrowDown"===t.key&&(this.softDrop("stop"),m=!0))},activeGameState:function(){return"game_over"===this.gameState?"0.4":"1"},activeColor:function(t){return t?"cf"===this.colorSheme?t:"black":"white"},prepareNextFigure:function(){var t=this.prepareNextFigureName(),e=(0,c.Z)(JSON.parse(JSON.stringify(this.getFigureStartCoords(t)))),r=this.getFigureStartColor(t);this.$store.dispatch("addNextFigureCoordinatesToState",{coords:e,color:r})},prepareNextFigureName:function(){var t=Math.floor(Math.random()*this.figuresNames.length);return this.figuresNames[t]},getFigureStartCoords:function(t){return this.$store.getters.getFigureStartCoords(t)},getFigureStartColor:function(t){return this.$store.getters.getFigureStartColor(t)},putNextFigureInTheGlass:function(){if(!1===this.isNextFigureCollideGlass()){var t=(0,c.Z)(JSON.parse(JSON.stringify(this.nextFigureCoords))),e=this.nextFigureColor;this.$store.dispatch("addCurrentFigureCoordinatesToState",{coords:t,color:e}),this.$store.dispatch("addCurrentFigureCoordsToGlass"),this.prepareNextFigure()}else this.$store.dispatch("setGOstatus",1)},isNextFigureCollideGlass:function(){for(var t=(0,c.Z)(JSON.parse(JSON.stringify(this.nextFigureCoords))),e=0;e<4;e++){var r=t[e][1],o=t[e][0];if(this.glass[o][r]>0||"string"===typeof this.glass[o][r])return this.play({id:"drop"}),!0}return!1},canCurrentFigureMoveDown:function(){var t=this,e=(0,c.Z)(JSON.parse(JSON.stringify(this.currentFigureCoords)));if(e[3][0]<v){for(var r=function(r){var o=e[r][1],n=e[r][0];if(t.glass[n+1][o]>0||"string"===typeof t.glass[n+1][o]){var i=e.filter((function(t){return t[0]===n+1&&t[1]===o}));if(0===i.length)return t.play({id:"drop"}),{v:!1}}},o=0;o<4;o++){var n=r(o);if("object"===(0,u.Z)(n))return n.v}return!0}return this.play({id:"drop"}),!1},isCurrentFigureBumpTheWall:function(t){var e;e="left"===t?h:d;var r=(0,c.Z)(JSON.parse(JSON.stringify(this.currentFigureCoords))),o=r.filter((function(t){return t[1]===e}));if(o.length>0)return!0},isHorizontalMovementPossible:function(t){var e,r=this;e="left"===t?-1:1;for(var o=(0,c.Z)(JSON.parse(JSON.stringify(this.currentFigureCoords))),n=function(t){var n=o[t][1],i=o[t][0];if(r.glass[i][n+e]>0||"string"===(0,u.Z)(r.glass[i][n+e])){var s=o.filter((function(t){return t[0]===i&&t[1]===n+e}));if(0===s.length)return r.play({id:"drop"}),{v:!1}}},i=0;i<4;i++){var s=n(i);if("object"===(0,u.Z)(s))return s.v}return!0},moveFigureDown:function(){this.$store.dispatch("moveFigureDown")},moveFigureLeft:function(){return!0===this.isCurrentFigureBumpTheWall("left")?void 0:void(!0===this.isHorizontalMovementPossible("left")&&(this.$store.dispatch("moveFigureHorizontally","left"),this.play({id:"move"})))},moveFigureRight:function(){return!0===this.isCurrentFigureBumpTheWall("right")?void 0:void(!0===this.isHorizontalMovementPossible("right")&&(this.$store.dispatch("moveFigureHorizontally","right"),this.play({id:"move"})))},figureRoration:function(){this.$store.dispatch("figureRoration")},softDrop:function(t){this.$store.dispatch("softDrop",t)}}},C=p,y=r(1001),F=(0,y.Z)(C,s,a,!1,null,null,null),S=F.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"welcome"},[r("h1",{on:{click:t.start}},[t._v("TETRIS")]),r("h2",[t._v("Chose color scheme or press Any Key to start the game")]),r("div",{staticClass:"controls"},[r("button",{on:{click:function(e){return t.toggleColorScheme("cf")}}},[t._v("COLORFULL")]),r("button",{on:{click:function(e){return t.toggleColorScheme("bw")}}},[t._v("BLACK&WHITE")])]),t._m(0)])},G=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contacts"},[r("a",{attrs:{href:"https://github.com/kay4yk13/tetris-vue",target:"_blank"}},[t._v("GitHub")])])}],b={created:function(){var t=this;document.addEventListener("keydown",(function(e){return t.start()}))},methods:{start:function(){this.$store.dispatch("toggleGameState","game"),this.$store.dispatch("setGOstatus",0)},toggleColorScheme:function(t){this.$store.dispatch("toggleColorScheme",t),this.start()}}},w=b,O=(0,y.Z)(w,x,G,!1,null,null,null),M=O.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"gameover",on:{click:this.goIndex}},[r("h1",[t._v("GAME OVER")]),r("h2",[t._v("press Any Key to return on main screen")])])},N=[],k={created:function(){var t=this;document.addEventListener("keydown",(function(e){return t.goIndex()}))},methods:{goIndex:function(){location.reload()}}},_=k,Z=(0,y.Z)(_,T,N,!1,null,null,null),$=Z.exports,E={components:{Game:S,WelcomeScreen:M,GameOver:$},computed:{gameState:function(){return this.$store.getters.getStateOfGame}},methods:{activeGameState:function(){return"game_over"===this.gameState?"0.5":"1"}}},I=E,D=(0,y.Z)(I,n,i,!1,null,null,null),A=D.exports,L=r(8345);o.Z.use(L.Z);var W=[],j=new L.Z({mode:"history",base:"/tetris-vue/",routes:W}),J=j,P=(r(9826),r(8309),r(1249),r(4747),r(3290),r(561),r(629));o.Z.use(P.ZP);var R=new P.ZP.Store({state:{figures:[{name:"O",coords:[[0,4],[0,5],[1,4],[1,5]],color:"blue"},{name:"T",coords:[[0,4],[0,5],[0,6],[1,5]],color:"orange"},{name:"S",coords:[[0,5],[0,6],[1,4],[1,5]],color:"yellow"},{name:"Z",coords:[[0,4],[0,5],[1,5],[1,6]],color:"green"},{name:"J",coords:[[0,4],[1,4],[1,5],[1,6]],color:"magenta"},{name:"L",coords:[[0,6],[1,4],[1,5],[1,6]],color:"grey"},{name:"I",coords:[[0,3],[0,4],[0,5],[0,6]],color:"red"}],glass:[],sandBoxGlass:[],currentFigureCoords:[],nextFigureCoords:[],currentFigureColor:0,nextFigureColor:0,nextFigureWIdgetMatrix:[],gameState:"welcome",isGameOver:0,scoreCounter:0,gravitySpeed:600,previousGravitySpeed:0,delay:[500,400,350,300,250,200,150,100,50,30],colorScheme:"cf"},getters:{getStateOfGame:function(t){return t.gameState},getGOstatus:function(t){return t.isGameOver},getColorScheme:function(t){return t.colorScheme},getGlass:function(t){return(0,c.Z)(t.glass)},getFigureStartCoords:function(t){return function(e){return(0,c.Z)(t.figures.find((function(t){return t.name===e})).coords)}},getFigureStartColor:function(t){return function(e){return t.figures.find((function(t){return t.name===e})).color}},getFigures:function(t){return(0,c.Z)(t.figures)},getFiguresNames:function(t){return(0,c.Z)(t.figures.map((function(t){var e=t.name;return e})))},getNextFigureCoords:function(t){return(0,c.Z)(t.nextFigureCoords)},getCurrentFigureCoords:function(t){return(0,c.Z)(t.currentFigureCoords)},getNextFigureColor:function(t){return t.nextFigureColor},getCurrentFigureColor:function(t){return t.currentFigureColor},getWidgetMatrix:function(t){return(0,c.Z)(t.nextFigureWIdgetMatrix)},getGravitySpeed:function(t){return t.gravitySpeed},getScoreCounter:function(t){return t.scoreCounter}},actions:{toggleGameState:function(t,e){var r=t.commit;r("toggleGameState",e)},toggleColorScheme:function(t,e){var r=t.commit;r("toggleColorScheme",e)},cleanGlass:function(t){var e=t.commit;e("cleanGlass")},setGOstatus:function(t,e){var r=t.commit;r("setGOstatus",e)},addNextFigureCoordinatesToState:function(t,e){var r=t.commit,o=e.coords,n=e.color;r("addNextFigureCoordinatesToState",o),r("addNextFigureColorToState",n),r("matrixForWidget",0),r("matrixForWidget",n)},addCurrentFigureCoordinatesToState:function(t,e){var r=t.commit,o=e.coords,n=e.color;r("addCurrentFigureCoordinatesToState",o),r("addCurrentFigureColorToState",n)},addCurrentFigureCoordsToGlass:function(t){var e=t.commit,r=this.getters.getCurrentFigureColor;e("changeCurrentFigureCoordsInGlassTo",r)},moveFigureDown:function(t){var e=t.commit,r=(0,c.Z)(this.getters.getCurrentFigureCoords),o=this.getters.getCurrentFigureColor;e("changeCurrentFigureCoordsInGlassTo",0);for(var n=0;n<4;n++)r[n][0]++,e("addCurrentFigureCoordinatesToState",r);e("changeCurrentFigureCoordsInGlassTo",o)},moveFigureHorizontally:function(t,e){var r=t.commit,o=(0,c.Z)(this.getters.getCurrentFigureCoords),n=this.getters.getCurrentFigureColor;r("changeCurrentFigureCoordsInGlassTo",0);for(var i=0;i<4;i++)"left"===e?o[i][1]--:o[i][1]++;r("addCurrentFigureCoordinatesToState",o),r("changeCurrentFigureCoordsInGlassTo",n)},softDrop:function(t,e){var r=t.commit;r("softDrop",e)},difficultyChanger:function(t){var e,r=t.commit,o=this.getters.getScoreCounter;e=o%10===0?o/10:Math.floor(o/10);var n=this.state.delay[e];r("difficultyChanger",n)},seekAndDestroyFullLine:function(t){var e=t.commit,r=(0,c.Z)(this.getters.getGlass);r.forEach((function(t,r){t.every((function(t){return t>0||"string"===typeof t}))&&e("lineDestroyer",r)}))},figureRoration:function(t){for(var e,r=t.commit,o=(0,c.Z)(this.getters.getCurrentFigureCoords),n=[],i=[],s=[],a=0;a<4;a++){var u=o[a][1],g=o[a][0];n.push(u),i.push(g)}for(var l=0;l<4;l++){var f=o[l][1]-Math.min.apply(Math,n),d=o[l][0]-Math.min.apply(Math,i);s.push([d,f])}var h=!1;Math.max.apply(Math,n)-Math.min.apply(Math,n)>Math.max.apply(Math,i)-Math.min.apply(Math,i)?(e=Math.max.apply(Math,n)-Math.min.apply(Math,n)+1,h=!1):(e=Math.max.apply(Math,i)-Math.min.apply(Math,i)+1,h=!0);for(var v=[],m=0;m<e;m++)v.push(Array(e).fill(0));for(var p=0;p<4;p++){var C=s[p][1],y=s[p][0];v[y].splice(C,1,1)}for(var F=v[0].map((function(t,e){return v.map((function(t){return t[e]})).reverse()})),S=[],x=function(t){var e=[];F[t].forEach((function(t,r,o){return 1===t&&e.push(r),e}));for(var r=0;r<e.length;r++)S.push([t,e[r]])},G=0;G<F.length;G++)x(G);for(var b,w=[],O=0;O<4;O++){var M=S[O][0]+Math.min.apply(Math,i);b=4===e?!0===h?S[O][1]+Math.min.apply(Math,n)-1:S[O][1]+Math.min.apply(Math,n)-2:!0===h&&3===e?S[O][1]+Math.min.apply(Math,n)-1:S[O][1]+Math.min.apply(Math,n),w.push([M,b])}for(var T=0;T<4;T++){var N=w.filter((function(t){return t[1]<0||t[1]>9}));if(N.length>0)return}r("changeCurrentFigureCoordsInGlassTo",0);for(var k=(0,c.Z)(this.getters.getGlass),_=this.getters.getCurrentFigureColor,Z=0;Z<4;Z++){var $=w[Z][1],E=w[Z][0];if(1===k[E][$])return void r("changeCurrentFigureCoordsInGlassTo",_)}r("updateCurrenFigureOrientation",{newCoords:w,size:e}),r("changeCurrentFigureCoordsInGlassTo",_)}},mutations:{difficultyChanger:function(t,e){t.gravitySpeed=e},softDrop:function(t,e){"drop"===e?(t.previousGravitySpeed=this.getters.getGravitySpeed,t.gravitySpeed=25):t.gravitySpeed=t.previousGravitySpeed},toggleGameState:function(t,e){t.gameState=e},toggleColorScheme:function(t,e){t.colorScheme=e},setGOstatus:function(t,e){t.isGameOver=e},addNextFigureCoordinatesToState:function(t,e){t.nextFigureCoords=e},addNextFigureColorToState:function(t,e){t.nextFigureColor=e},addCurrentFigureCoordinatesToState:function(t,e){t.currentFigureCoords=e},addCurrentFigureColorToState:function(t,e){t.currentFigureColor=e},updateCurrenFigureOrientation:function(t,e){for(var r=e.newCoords,o=e.size,n=0;n<o;n++)t.currentFigureCoords.unshift(Array(o).fill(0));t.currentFigureCoords=r},changeCurrentFigureCoordsInGlassTo:function(t,e){for(var r=this.getters.getCurrentFigureCoords,n=0;n<4;n++){var i=r[n][1],s=r[n][0];o.Z.set(t.glass[s],i,e)}},matrixForWidget:function(t,e){var r=this.getters.getNextFigureCoords;if(e>0||"string"===typeof e)for(var n=0;n<4;n++){var i=r[n][1]-3,s=r[n][0]+1;o.Z.set(t.nextFigureWIdgetMatrix[s],i,e)}else t.nextFigureWIdgetMatrix=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]},cleanGlass:function(t){t.glass=[];for(var e=0;e<21;e++)t.glass.push(Array(10).fill(0))},lineDestroyer:function(t,e){t.glass.splice(e,1),t.glass.unshift(Array(10).fill(0)),t.scoreCounter++}}});o.Z.config.productionTip=!1;var z=new o.Z({router:J,store:R,render:function(t){return t(A)}}).$mount("#app");window.$app=z}},e={};function r(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,o,n,i){if(!o){var s=1/0;for(g=0;g<t.length;g++){o=t[g][0],n=t[g][1],i=t[g][2];for(var a=!0,u=0;u<o.length;u++)(!1&i||s>=i)&&Object.keys(r.O).every((function(t){return r.O[t](o[u])}))?o.splice(u--,1):(a=!1,i<s&&(s=i));if(a){t.splice(g--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var g=t.length;g>0&&t[g-1][2]>i;g--)t[g]=t[g-1];t[g]=[o,n,i]}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.f={},r.e=function(t){return Promise.all(Object.keys(r.f).reduce((function(e,o){return r.f[o](t,e),e}),[]))}}(),function(){r.u=function(t){return"js/"+t+"-legacy.58d60a73.js"}}(),function(){r.miniCssF=function(t){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="tetris:";r.l=function(o,n,i,s){if(t[o])t[o].push(n);else{var a,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),g=0;g<c.length;g++){var l=c[g];if(l.getAttribute("src")==o||l.getAttribute("data-webpack")==e+i){a=l;break}}a||(u=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",e+i),a.src=o),t[o]=[n];var f=function(e,r){a.onerror=a.onload=null,clearTimeout(d);var n=t[o];if(delete t[o],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((function(t){return t(r)})),e)return e(r)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),u&&document.head.appendChild(a)}}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/tetris-vue/"}(),function(){var t={143:0};r.f.j=function(e,o){var n=r.o(t,e)?t[e]:void 0;if(0!==n)if(n)o.push(n[2]);else{var i=new Promise((function(r,o){n=t[e]=[r,o]}));o.push(n[2]=i);var s=r.p+r.u(e),a=new Error,u=function(o){if(r.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;a.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,n[1](a)}};r.l(s,u,"chunk-"+e,e)}},r.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,i,s=o[0],a=o[1],u=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(u)var g=u(r)}for(e&&e(o);c<s.length;c++)i=s[c],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(g)},o=self["webpackChunktetris"]=self["webpackChunktetris"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(9028)}));o=r.O(o)})();
//# sourceMappingURL=app-legacy.c2c0bd90.js.map